<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Alex Simkin">
    <meta name="description" content="Alex Simkin&#39;s personal website">
    <meta name="keywords" content="blog,developer,personal">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Referential transparency"/>
<meta name="twitter:description" content="Referential transparency is a nice property of pure functional programming languages that allow us to reason about the behaviour of our programs. It means that an expression always evaluates to the same result in any context. What it gives us is the ease of equational reasoning about our programs as we used to do in math.
2 &#43; (2 * 2) === 2 &#43; 4 === 6 &#34;Hello&#34; &#43; &#34; &#34; &#43; &#34;world&#34; === &#34;Hello &#34; &#43; &#34;world&#34; === &#34;Hello&#34; &#43; &#34; world&#34; === &#34;Hello world&#34; List(1, 2, 3) &#43;&#43; List(4, 5, 6) === List(1, 2, 3, 4, 5, 6) g(f(a)) === (g compose f)(a) If you think about it, most of the modern compilers (non-FP included) can already do some optimisations for referentially transparent code fragments."/>


    <base href="https://SimY4.github.io/posts/002-referential-transparency/">
    <title>
  Referential transparency · My personal space
</title>

    <link rel="canonical" href="https://SimY4.github.io/posts/002-referential-transparency/">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather:300,700|Source+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://SimY4.github.io/css/coder.min.ac37073bc2826cd28ef57364a9fe339de7ebcb26dafc22fd832cb35cf5b1d048.css" integrity="sha256-rDcHO8KCbNKO9XNkqf4znefryyba/CL9gyyzXPWx0Eg=" crossorigin="anonymous" media="screen" />
    

    

    

    

    <link rel="icon" type="image/png" href="https://SimY4.github.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://SimY4.github.io/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.54.0" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://SimY4.github.io">
      My personal space
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://SimY4.github.io/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://SimY4.github.io/categories/">Categories</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://SimY4.github.io/tags/">Tags</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Referential transparency</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2019-02-01T00:00:00Z'>
                February 1, 2019
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              2 minutes read
            </span>
          </div>
          <div class="categories">
  <i class="fas fa-folder"></i>
    <a href="https://SimY4.github.io/categories/fp/">fp</a></div>

          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="https://SimY4.github.io/tags/fp/">fp</a></div>

        </div>
      </header>

      <div>
        <p>Referential transparency is a nice property of pure functional programming languages that allow us to reason about the behaviour of our programs. It means that an expression always evaluates to the same result in any context. What it gives us is the ease of equational reasoning about our programs as we used to do in math.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">2 + (2 * 2) === 2 + 4 === 6
<span style="font-style:italic">&#34;Hello&#34;</span> + <span style="font-style:italic">&#34; &#34;</span> + <span style="font-style:italic">&#34;world&#34;</span> === <span style="font-style:italic">&#34;Hello &#34;</span> + <span style="font-style:italic">&#34;world&#34;</span> === <span style="font-style:italic">&#34;Hello&#34;</span> + <span style="font-style:italic">&#34; world&#34;</span> === <span style="font-style:italic">&#34;Hello world&#34;</span>
<span style="font-weight:bold">List</span>(1, 2, 3) ++ <span style="font-weight:bold">List</span>(4, 5, 6) === <span style="font-weight:bold">List</span>(1, 2, 3, 4, 5, 6)
g(f(a)) === (g compose f)(a)</code></pre></div>
<p>If you think about it, most of the modern compilers (non-FP included) can already do some optimisations for referentially transparent code fragments. For example, they can perform dead code elimination which can evaluate arithmetic expressions into a constant value, interpolate string literals or get rid of staged builders. But some fragment they are not allowed to optimise just because they can&rsquo;t prove that this change will not break code&rsquo;s original semantics. So not only making our code referentially transparent give us better code readability but also it helps the compiler to perform certain optimisations that can make your code more performant.</p>

<p>So, why something can be non-referentially transparent? Well, basically every expression containing side-effect or mutable state breaks the property of referential transparency.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="font-weight:bold">val</span> iterator <span style="font-weight:bold">=</span> <span style="font-weight:bold">List</span>(1, 2, 3).iterator
<span style="font-weight:bold">val</span> next <span style="font-weight:bold">=</span> iterator.next
next + next =!= iterator.next + iterator.next

<span style="font-weight:bold">import</span> <span style="font-weight:bold">scala.concurrent._</span>
<span style="font-weight:bold">import</span> <span style="font-weight:bold">ExecutionContext.Implicits.global</span>
<span style="font-weight:bold">import</span> <span style="font-weight:bold">scala.concurrent.duration._</span>
<span style="font-weight:bold">import</span> <span style="font-weight:bold">scala.io.StdIn._</span>

<span style="font-weight:bold">def</span> readNumber <span style="font-weight:bold">=</span> <span style="font-weight:bold">Await</span>.result(<span style="font-weight:bold">Future</span> { readLine(<span style="font-style:italic">&#34;Give me a number&gt;&#34;</span>).toInt }, 10.seconds)
<span style="font-weight:bold">val</span> number <span style="font-weight:bold">=</span> readNumber
number + number =!= readNumber + readNumber</code></pre></div>
<p>You may wonder, how can our programs do anything useful without being able to perform side-effects? Well, let&rsquo;s talk about effects and side effects in the next blog post.</p>

      </div>

      <footer>
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "actinglikecrazy" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
     © 2019
    
       · 
      Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
